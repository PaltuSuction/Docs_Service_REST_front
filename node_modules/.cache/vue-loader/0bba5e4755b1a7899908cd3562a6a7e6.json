{"remainingRequest":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/src/components/CreateTable.vue?vue&type=style&index=0&id=2464bd32&scoped=true&lang=css&","dependencies":[{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/src/components/CreateTable.vue","mtime":1588451503644},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY3JlYXRpb24tc2V0dGluZ3MtZm9ybSB7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLnRhYmxlZ2VuLXNlbGVjdC1kaXJlY3QgewogICAgd2lkdGg6IDI4dnc7CiAgICBtYXJnaW4tbGVmdDogNXB4OwogICAgbWFyZ2luLXJpZ2h0OiA1cHg7Cn0KLnRhYmxlZ2VuLXNlbGVjdC1ncm91cCB7CiAgICB3aWR0aDogMTB2dzsKICAgIG1hcmdpbi1sZWZ0OiA1cHg7CiAgICBtYXJnaW4tcmlnaHQ6IDVweDsKfQoudGFibGVnZW4taW5wdXQtbmFtZSB7CiAgICB3aWR0aDogMTV2dzsKICAgIG1hcmdpbi1sZWZ0OiA1cHg7CiAgICBtYXJnaW4tcmlnaHQ6IDVweDsKfQoKLnNjb3Jlcy10YWJsZSB7CiAgICBtYXJnaW4tdG9wOiAxNXB4Owp9Cg=="},{"version":3,"sources":["CreateTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"CreateTable.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"\">\n         <div class=\"card\">\n             <div class=\"card-body\">\n                 <b-form-group label=\"Укажите группу и название таблицы\" class=\"mt-2 creation-settings-form\">\n                     <div class=\"row\">\n                         <b-form-select id=\"discipline\" v-model=\"selected_direction\" class=\"tablegen-select-direct mt-2\" @change=\"fetch_groups\">\n                             <template v-slot:first>\n                                <b-form-select-option :value=\"''\" disabled>-- Направление подготовки --</b-form-select-option>\n                             </template>\n                             <b-form-select-option v-for=\"direction in all_directions\" v-bind:value=\"direction.name\">\n                                 {{ $store.state.direction_decryption[direction.name] }}\n                             </b-form-select-option>\n                         </b-form-select>\n                         <b-form-select id=\"discipline\" v-model=\"selected_group\" class=\"tablegen-select-group mt-2\">\n                             <template v-slot:first>\n                                <b-form-select-option :value=\"''\" disabled>-- Группа --</b-form-select-option>\n                             </template>\n                            <b-form-select-option v-for=\"group_number in groups_on_direction\" v-bind:value=\"group_number\">{{group_number}}</b-form-select-option>\n                         </b-form-select>\n                        <b-input class=\"tablegen-input-name mt-2\" placeholder=\"Название таблицы\" v-model=\"new_table_name\"/>\n                     </div>\n                     <b-button secondary type=\"submit\" value=\"Создать\" class=\"mt-2\" @click=\"create_table\">Создать таблицу</b-button>\n                 </b-form-group>\n             </div>\n         </div>\n\n        <!--<b-table striped hover bordered :items=\"table.items\" :fields=\"table.fields\" class='scores-table'>\n          <template v-slot:cell(final_score)=\"row\">\n            <b-form-input v-model=\"row.item['final_score']\"/>\n          </template>\n        </b-table> -->\n\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n    import store from '../store'\n\n    export default {\n        name: \"CreateTable\",\n        components: {\n\n        },\n        data() {\n            return {\n                all_directions: '',\n                selected_direction: '',\n                groups_on_direction: [],\n                selected_group: '',\n                students_in_selected_group: '',\n                new_table_name: '',\n\n                table: {\n                    fields: {number: '№', fio: 'ФИО', final_score: 'Итоговая оценка'},\n                    items: []\n                },\n            }\n        },\n        methods: {\n            fetch_groups: function () {\n                // data = {'studying_direction': this.studying_direction}\n                axios.get(`http://localhost:6060/api/groups_by_direct/${this.selected_direction}/`)\n                .then(resp => (this.groups_on_direction = resp.data.params.groups_numbers))\n                .catch(error => (console.log(error)))\n            },\n            create_table: function() {\n                let data = {'action': 'create_new',\n                    params: {'group_number': this.selected_group, 'new_table_name': this.new_table_name}\n                }\n                axios({url: 'http://localhost:6060/api/table_creator/', data: data, method: 'POST'})\n                .then(resp => (this.fetch_students_info(resp.data.params.students)))\n                .catch(error =>(console.log(error)))\n            },\n            fetch_students_info: function (students_in_selected_group) {\n                let in_group_number = 1\n                for (let student of students_in_selected_group) {\n                    let fio = student.last_name + ' ' + student.first_name + ' ' + student.middle_name\n                    let ticket_number = student.ticket_number\n                    this.table.items.push({'№': in_group_number, 'ФИО': fio, 'final_score': ''})\n                    in_group_number += 1\n                }\n            }\n        },\n        created() {\n             let data = {'action': 'get_directions'}\n             axios({url: 'http://localhost:6060/api/table_creator/', data: data, method: 'POST'})\n                .then(resp => (this.all_directions = resp.data.params.directions_names))\n                .catch(error =>(console.log(error)))\n        }\n    }\n</script>\n\n<style scoped>\n    .creation-settings-form {\n        text-align: center;\n    }\n    .tablegen-select-direct {\n        width: 28vw;\n        margin-left: 5px;\n        margin-right: 5px;\n    }\n    .tablegen-select-group {\n        width: 10vw;\n        margin-left: 5px;\n        margin-right: 5px;\n    }\n    .tablegen-input-name {\n        width: 15vw;\n        margin-left: 5px;\n        margin-right: 5px;\n    }\n\n    .scores-table {\n        margin-top: 15px;\n    }\n</style>"]}]}