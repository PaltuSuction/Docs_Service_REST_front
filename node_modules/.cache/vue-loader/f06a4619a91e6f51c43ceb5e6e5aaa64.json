{"remainingRequest":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/src/views/TabeCreateView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/src/views/TabeCreateView.vue","mtime":1589458245168},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgcm91dGVyIGZyb20gIi4uL3JvdXRlci9pbmRleCI7CmltcG9ydCBzdG9yZSBmcm9tICIuLi9zdG9yZSI7CmltcG9ydCBUYWJsZUdlbmVyYXRvciBmcm9tICIuLi9jb21wb25lbnRzL1RhYmxlR2VuZXJhdG9yIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVGFibGVDcmVhdGVWaWV3JywKICBjb21wb25lbnRzOiB7CiAgICBUYWJsZUdlbmVyYXRvcgogIH0sCiAgZGF0YSgpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHN0b3JlOnN0b3JlLAogICAgICAgICAgICAgICAgYWxsX2RpcmVjdGlvbnM6ICcnLAogICAgICAgICAgICAgICAgc2VsZWN0ZWRfZGlyZWN0aW9uOiAnJywKICAgICAgICAgICAgICAgIGdyb3Vwc19vbl9kaXJlY3Rpb246IFtdLAogICAgICAgICAgICAgICAgZ3JvdXBfbnVtYmVyczogJycsCiAgICAgICAgICAgICAgICBzZWxlY3RlZF9ncm91cDogJycsCiAgICAgICAgICAgICAgICBzdHVkZW50c19pbl9zZWxlY3RlZF9ncm91cDogJycsCiAgICAgICAgICAgICAgICBuZXdfdGFibGVfbmFtZTogJycsCiAgICAgICAgICAgICAgICB0YWJsZV9kYXRhOiAnJywKCiAgICAgICAgICAgICAgICB0ZWFjaGVyX2RlcGFydG1lbnRzOiBbXSwKICAgICAgICAgICAgICAgIHRhYmxlX2RlcGFydG1lbnQ6ICcnLAogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgIGZldGNoX2dyb3VwczogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgLy8gZGF0YSA9IHsnc3R1ZHlpbmdfZGlyZWN0aW9uJzogdGhpcy5zdHVkeWluZ19kaXJlY3Rpb259CiAgICAgICAgICAgICAgICBheGlvcy5nZXQoYGh0dHA6Ly9sb2NhbGhvc3Q6NjA2MC9hcGkvZ3JvdXBzX2J5X2RpcmVjdC8ke3RoaXMuc2VsZWN0ZWRfZGlyZWN0aW9ufS9gKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiAodGhpcy5ncm91cHNfb25fZGlyZWN0aW9uID0gcmVzcC5kYXRhLnBhcmFtcy5ncm91cHNfbnVtYmVycykpCiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gKGNvbnNvbGUubG9nKGVycm9yKSkpCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNyZWF0ZV90YWJsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHsnYWN0aW9uJzogJ2NyZWF0ZV9uZXcnLAogICAgICAgICAgICAgICAgICAgIHBhcmFtczogeydncm91cF9udW1iZXInOiB0aGlzLnNlbGVjdGVkX2dyb3VwLCAnbmV3X3RhYmxlX25hbWUnOiB0aGlzLm5ld190YWJsZV9uYW1lLCAndGFibGVfZGVwYXJ0bWVudCc6IHRoaXMudGFibGVfZGVwYXJ0bWVudH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGF4aW9zKHt1cmw6ICdodHRwOi8vbG9jYWxob3N0OjYwNjAvYXBpL3RhYmxlX2NyZWF0b3IvJywgZGF0YTogZGF0YSwgbWV0aG9kOiAnUE9TVCd9KQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3AuZGF0YS5yZXN1bHQgPT09ICdvaycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZV9kYXRhID0gcmVzcC5kYXRhLnBhcmFtcy50YWJsZV9kYXRhCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9Pihjb25zb2xlLmxvZyhlcnJvcikpKQogICAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgY3JlYXRlZCgpIHsKICAgICAgICAgICAgIGxldCBkYXRhID0geydhY3Rpb24nOiAnZ2V0X2RpcmVjdHNfYW5kX2RlcGFydG1lbnRzJ30KICAgICAgICAgICAgIGF4aW9zKHt1cmw6ICdodHRwOi8vbG9jYWxob3N0OjYwNjAvYXBpL3RhYmxlX2NyZWF0b3IvJywgZGF0YTogZGF0YSwgbWV0aG9kOiAnUE9TVCd9KQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcCA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3AuZGF0YS5yZXN1bHQgPT09ICdvaycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxfZGlyZWN0aW9ucyA9IHJlc3AuZGF0YS5wYXJhbXMuZGlyZWN0aW9uc19uYW1lcwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwX251bWJlcnMgPSByZXNwLmRhdGEucGFyYW1zLmFsbF9ncm91cF9udW1iZXJzCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVhY2hlcl9kZXBhcnRtZW50cyA9IHJlc3AuZGF0YS5wYXJhbXMudGVhY2hlcl9kZXBhcnRtZW50cwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEucGFyYW1zLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+KGNvbnNvbGUubG9nKGVycm9yKSkpCiAgICAgICAgfQp9Cg=="},{"version":3,"sources":["TabeCreateView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TabeCreateView.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"table-create-view\">\n    <h2>Создание ведомости</h2>\n      <div class=\"card\">\n         <div class=\"card-body\">\n             <b-form-group label=\"Выберите направление подготовки, затем группу\">\n                 <b-row align-h=\"center\">\n                     <b-col md=\"4\" class=\"mr-2\">\n                        <b-form-select id=\"discipline\" class=\"mt-2\" v-model=\"selected_direction\" @change=\"fetch_groups\">\n                         <template v-slot:first>\n                            <b-form-select-option :value=\"''\" disabled>-- Направление подготовки --</b-form-select-option>\n                         </template>\n                         <b-form-select-option class=\"mt-2\" v-for=\"direction in all_directions\" :key=\"direction.name\" v-bind:value=\"direction.name\">\n                             {{ $store.state.direction_decryption[direction.name] }}\n                         </b-form-select-option>\n                        </b-form-select>\n                     </b-col>\n                     <b-col md=\"4\" class=\"ml-2\">\n                         <b-form-select class=\"mt-2\" id=\"discipline\" v-model=\"selected_group\">\n                             <template v-slot:first>\n                                <b-form-select-option :value=\"''\" disabled>-- Группа --</b-form-select-option>\n                             </template>\n                             <b-form-select-option v-for=\"group_number in groups_on_direction\" :key=\"group_number\" v-bind:value=\"group_number\">{{group_number}}</b-form-select-option>\n                         </b-form-select>\n                     </b-col>\n                 </b-row>\n                 </b-form-group>\n             <b-form-group label=\"Или сразу введите номер группы\">\n                 <b-row align-h=\"center\">\n                     <b-col md=\"3\" class=\"mr-2\">\n                         <b-form-input list=\"groups_list\" class=\"mt-2\" placeholder=\"Номер группы\" v-model=\"selected_group\"/>\n                     </b-col>\n                     <datalist id=\"groups_list\">\n                        <option v-for=\"group_number in group_numbers\">{{ group_number }}</option>\n                     </datalist>\n\n                     <b-col md=\"3\" class=\"mr-2\">\n                         <b-form-input list=\"departments_list\" class=\"mt-2\" placeholder=\"Кафедра\" v-model=\"table_department\"/>\n                     </b-col>\n                     <datalist id=\"departments_list\">\n                        <option v-for=\"department_name in teacher_departments\">{{ department_name }}</option>\n                     </datalist>\n\n                     <b-col md=\"3\" class=\"ml-2\">\n                         <b-input class=\"mt-2\" placeholder=\"Название дисциплины\" v-model=\"new_table_name\"/>\n                     </b-col>\n                 </b-row>\n                 <b-button squared secondary type=\"submit\" value=\"Создать\" class=\"mt-2\" @click=\"create_table\">Создать таблицу</b-button>\n             </b-form-group>\n         </div>\n      </div>\n\n        <TableGenerator v-if=\"table_data !== ''\" :table_data=\"table_data\"/>\n\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport axios from \"axios\";\nimport router from \"../router/index\";\nimport store from \"../store\";\nimport TableGenerator from \"../components/TableGenerator\";\n\nexport default {\n  name: 'TableCreateView',\n  components: {\n    TableGenerator\n  },\n  data() {\n            return {\n                store:store,\n                all_directions: '',\n                selected_direction: '',\n                groups_on_direction: [],\n                group_numbers: '',\n                selected_group: '',\n                students_in_selected_group: '',\n                new_table_name: '',\n                table_data: '',\n\n                teacher_departments: [],\n                table_department: '',\n            }\n        },\n        methods: {\n            fetch_groups: function () {\n                // data = {'studying_direction': this.studying_direction}\n                axios.get(`http://localhost:6060/api/groups_by_direct/${this.selected_direction}/`)\n                .then(resp => (this.groups_on_direction = resp.data.params.groups_numbers))\n                .catch(error => (console.log(error)))\n            },\n            create_table: function() {\n                let data = {'action': 'create_new',\n                    params: {'group_number': this.selected_group, 'new_table_name': this.new_table_name, 'table_department': this.table_department}\n                }\n                axios({url: 'http://localhost:6060/api/table_creator/', data: data, method: 'POST'})\n                .then(resp => {\n                    if (resp.data.result === 'ok') {\n                        this.table_data = resp.data.params.table_data\n                    }\n                })\n                .catch(error =>(console.log(error)))\n            },\n        },\n        created() {\n             let data = {'action': 'get_directs_and_departments'}\n             axios({url: 'http://localhost:6060/api/table_creator/', data: data, method: 'POST'})\n                .then(resp => {\n                    if (resp.data.result === 'ok') {\n                        this.all_directions = resp.data.params.directions_names\n                        this.group_numbers = resp.data.params.all_group_numbers\n                        this.teacher_departments = resp.data.params.teacher_departments\n                    }\n                    else {\n                       console.log(resp.data.params.message)\n                    }\n                }\n                )\n                .catch(error =>(console.log(error)))\n        }\n}\n</script>\n\n<style>\n\n</style>\n"]}]}