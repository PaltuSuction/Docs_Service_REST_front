{"remainingRequest":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/src/components/TableGenerator.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/src/components/TableGenerator.vue","mtime":1589305803611},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/paltus/PycharmProjects/Docs_Service_REST_v2/tablegenfront/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIlRhYmxlR2VuZXJhdG9yIiwKICAgIGNvbXBvbmVudHM6IHt9LAogICAgcHJvcHM6IFsndGFibGVfZGF0YSddLAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzdG9yZTogc3RvcmUsCiAgICAgICAgICAgIHRhYmxlX2lkOiAnJywKICAgICAgICAgICAgc3R1ZGVudHM6ICcnLAogICAgICAgICAgICBncmFkZXNfdHlwZXM6ICcnLAogICAgICAgICAgICBzZWxlY3RlZF9jb2x1bW5fdHlwZTogJycsCiAgICAgICAgICAgIGNob29zZWRfY29sdW1uX3R5cGU6ICcnLAogICAgICAgICAgICBjdXN0b21fY29sdW1uX3R5cGU6ICcnLAogICAgICAgICAgICBjdXJyZW50X2dyYWRlOiAnJywKICAgICAgICAgICAgZmluYWxfZ3JhZGVfY2FsY19vcHRpb25zOiBbCiAgICAgICAgICAgICAgICB7dmFsdWU6ICdhdmVyYWdlJywgdGV4dDogJ9Ch0YDQtdC00L3QuNC5INCx0LDQu9C7J30sCiAgICAgICAgICAgICAgICB7dmFsdWU6ICdzdW0nLCB0ZXh0OiAn0KHRg9C80LzQsCDQsdCw0LvQu9C+0LInfSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgY2hvb3NlZF9jYWxjX29wdGlvbjogJycsCiAgICAgICAgICAgIHVuZmlsbGVkX2FzX3plcm86IGZhbHNlCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBhZGRfY29sdW1uOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxldCBfdCA9IHRoaXMKCiAgICAgICAgICAgIGlmIChfdC5jaG9vc2VkX2NvbHVtbl90eXBlID09PSAn0KHQstC+0Lkg0LLQsNGA0LjQsNC90YInKSB7CiAgICAgICAgICAgICAgICBpZiAoX3QuY3VzdG9tX2NvbHVtbl90eXBlICE9PSAnJykgewogICAgICAgICAgICAgICAgICAgIF90LnNlbGVjdGVkX2NvbHVtbl90eXBlID0gX3QuY3VzdG9tX2NvbHVtbl90eXBlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7X3Quc2VsZWN0ZWRfY29sdW1uX3R5cGUgPSBfdC5jaG9vc2VkX2NvbHVtbl90eXBlfQoKICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKF90LmdyYWRlc190eXBlcykpIHsKICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuc2VsZWN0ZWRfY29sdW1uX3R5cGUpIHsKICAgICAgICAgICAgICAgICAgICBfdC5ncmFkZXNfdHlwZXNba2V5XSArPTEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoX3QuZ3JhZGVzX3R5cGVzW190LnNlbGVjdGVkX2NvbHVtbl90eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICBfdC4kc2V0KF90LmdyYWRlc190eXBlcywgX3Quc2VsZWN0ZWRfY29sdW1uX3R5cGUsIDEpCgogICAgICAgICAgICAgICAgbGV0IG9yZGVyZWRfdHlwZXMgPSB7fQogICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoX3QuZ3JhZGVzX3R5cGVzKS5zb3J0KCkuZm9yRWFjaChmdW5jdGlvbihrZXkpIHsKICAgICAgICAgICAgICAgICAgICBvcmRlcmVkX3R5cGVzW2tleV0gPSBfdC5ncmFkZXNfdHlwZXNba2V5XTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBfdC5ncmFkZXNfdHlwZXMgPSBvcmRlcmVkX3R5cGVzCiAgICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgbGV0IHN0dWRlbnRzX3dpdGhfc29ydGVkX2dyYWRlcyA9IFtdCiAgICAgICAgICAgICAgICBmb3IgKGxldCBzdHVkZW50IG9mIHRoaXMuc3R1ZGVudHMpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgb3JkZXJlZF90eXBlc19mb3Jfc3R1ZGVudCA9IHt9CiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoc3R1ZGVudC5ncmFkZXMpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgICAgICAgICAgIG9yZGVyZWRfdHlwZXNfZm9yX3N0dWRlbnRba2V5XSA9IHN0dWRlbnQuZ3JhZGVzW2tleV07CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBzdHVkZW50LmdyYWRlcyA9IG9yZGVyZWRfdHlwZXNfZm9yX3N0dWRlbnQKICAgICAgICAgICAgICAgICAgICBzdHVkZW50c193aXRoX3NvcnRlZF9ncmFkZXMucHVzaChzdHVkZW50KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5zdHVkZW50cyA9IHN0dWRlbnRzX3dpdGhfc29ydGVkX2dyYWRlcwogICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGRhdGEgPSB7YWN0aW9uOiAnYWRkX2NvbHVtbicsIHBhcmFtczoge3RhYmxlX2lkOiBfdC50YWJsZV9pZCwgY29sdW1uX3R5cGU6IF90LnNlbGVjdGVkX2NvbHVtbl90eXBlfX0KICAgICAgICAgICAgYXhpb3Moe3VybDogYGh0dHA6Ly9sb2NhbGhvc3Q6NjA2MC9hcGkvdGFibGVfY3JlYXRvci9gLCBkYXRhOiBkYXRhLCBtZXRob2Q6ICdQT1NUJ30pCiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlc3AuZGF0YS5yZXN1bHQgPT09ICdvaycpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgbmV3X2dyYWRlcyA9IHJlc3AuZGF0YS5wYXJhbXMubmV3X2dyYWRlcwogICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHN0dWRlbnQgb2YgX3Quc3R1ZGVudHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX3Quc2VsZWN0ZWRfY29sdW1uX3R5cGUgaW4gc3R1ZGVudC5ncmFkZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdC4kc2V0KHN0dWRlbnQuZ3JhZGVzLCBfdC5zZWxlY3RlZF9jb2x1bW5fdHlwZSwgW10pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgc3R1ZGVudC5ncmFkZXNbX3Quc2VsZWN0ZWRfY29sdW1uX3R5cGVdLnB1c2gobmV3X2dyYWRlc1tzdHVkZW50LmlkXSkKICAgICAgICAgICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0dWRlbnRzX3dpdGhfc29ydGVkX2dyYWRlcyA9IFtdCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHN0dWRlbnQgb2YgdGhpcy5zdHVkZW50cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9yZGVyZWRfdHlwZXNfZm9yX3N0dWRlbnQgPSB7fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoc3R1ZGVudC5ncmFkZXMpLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXJlZF90eXBlc19mb3Jfc3R1ZGVudFtrZXldID0gc3R1ZGVudC5ncmFkZXNba2V5XTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHVkZW50LmdyYWRlcyA9IG9yZGVyZWRfdHlwZXNfZm9yX3N0dWRlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnRzX3dpdGhfc29ydGVkX2dyYWRlcy5wdXNoKHN0dWRlbnQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHVkZW50cyA9IHN0dWRlbnRzX3dpdGhfc29ydGVkX2dyYWRlcwogICAgICAgICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YS5wYXJhbXMubWVzc2FnZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGRlbGV0ZV9jb2x1bW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF90ID0gdGhpcwoKICAgICAgICAgICAgaWYgKF90LmNob29zZWRfY29sdW1uX3R5cGUgPT09ICfQodCy0L7QuSDQstCw0YDQuNCw0L3RgicpIHsKICAgICAgICAgICAgICAgIGlmIChfdC5jdXN0b21fY29sdW1uX3R5cGUgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgX3Quc2VsZWN0ZWRfY29sdW1uX3R5cGUgPSBfdC5jdXN0b21fY29sdW1uX3R5cGUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHtfdC5zZWxlY3RlZF9jb2x1bW5fdHlwZSA9IF90LmNob29zZWRfY29sdW1uX3R5cGV9CgogICAgICAgICAgICBpZiAoX3Quc2VsZWN0ZWRfY29sdW1uX3R5cGUgaW4gX3QuZ3JhZGVzX3R5cGVzKSB7CiAgICAgICAgICAgICAgICAgbGV0IGRlbGV0ZWRfZ3JhZGVzX2lkcyA9IFtdCiAgICAgICAgICAgICAgICAgZm9yIChsZXQgc3R1ZGVudCBvZiBfdC5zdHVkZW50cykgewogICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdF9ncmFkZV9pbl90eXBlID0gc3R1ZGVudC5ncmFkZXNbX3Quc2VsZWN0ZWRfY29sdW1uX3R5cGVdW3N0dWRlbnQuZ3JhZGVzW190LnNlbGVjdGVkX2NvbHVtbl90eXBlXS5sZW5ndGggLSAxXQogICAgICAgICAgICAgICAgICAgICBsZXQgbGFzdF9ncmFkZV9pbl90eXBlX2lkID0gbGFzdF9ncmFkZV9pbl90eXBlLmlkCiAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRfZ3JhZGVzX2lkcy5wdXNoKGxhc3RfZ3JhZGVfaW5fdHlwZV9pZCkKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7YWN0aW9uOiAnZGVsZXRlX2NvbHVtbicsIHBhcmFtczoge3RhYmxlX2lkOiBfdC50YWJsZV9pZCwgZ3JhZGVzX2lkczogZGVsZXRlZF9ncmFkZXNfaWRzfX0KICAgICAgICAgICAgICAgICBheGlvcyh7dXJsOiBgaHR0cDovL2xvY2FsaG9zdDo2MDYwL2FwaS90YWJsZV9jcmVhdG9yL2AsIGRhdGE6IGRhdGEsIG1ldGhvZDogJ1BPU1QnfSkKICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChyZXNwLmRhdGEucmVzdWx0ID09PSAnb2snKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHN0dWRlbnQgb2YgX3Quc3R1ZGVudHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0dWRlbnQuZ3JhZGVzW190LnNlbGVjdGVkX2NvbHVtbl90eXBlXS5wb3AoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0dWRlbnQuZ3JhZGVzW190LnNlbGVjdGVkX2NvbHVtbl90eXBlXSA8PSAwKSBkZWxldGUgc3R1ZGVudC5ncmFkZXNbX3Quc2VsZWN0ZWRfY29sdW1uX3R5cGVdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKF90LmdyYWRlc190eXBlcykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IF90LnNlbGVjdGVkX2NvbHVtbl90eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3QuZ3JhZGVzX3R5cGVzW2tleV0gLT0xCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90LmdyYWRlc190eXBlc1trZXldIDw9IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90LmdyYWRlc190eXBlc1trZXldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwLmRhdGEucGFyYW1zLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZmluYWxfZ3JhZGVfY2FsYzogZnVuY3Rpb24gKHN0dWRlbnQpIHsKICAgICAgICAgIGlmICh0aGlzLmNob29zZWRfY2FsY19vcHRpb24gPT09ICcnKSB7cmV0dXJuIHN0dWRlbnQuZ3JhZGVzWydcdTA1QzTQmNGC0L7QsyddWzBdLmdyYWRlX3ZhbHVlfQogICAgICAgICAgbGV0IGZpbmFsX2dyYWRlID0gMAogICAgICAgICAgbGV0IGdyYWRlc19jb3VudCA9IDAKICAgICAgICAgIGZvciAobGV0IFtncmFkZV90eXBlLCBncmFkZXNfYXJyYXldIG9mIE9iamVjdC5lbnRyaWVzKHN0dWRlbnQuZ3JhZGVzKSkgewogICAgICAgICAgICAgIGZvciAobGV0IGdyYWRlIG9mIGdyYWRlc19hcnJheSkgewogICAgICAgICAgICAgICAgICBpZiAoZ3JhZGUuZ3JhZGVfdmFsdWUgIT09IG51bGwgJiYgZ3JhZGUuZ3JhZGVfdmFsdWUgIT09ICcnICYmIGdyYWRlX3R5cGUgIT09ICdcdTA1QzTQmNGC0L7QsycpIHsKICAgICAgICAgICAgICAgICAgICAgbGV0IGdyYWRlX2ludCA9IE51bWJlci5wYXJzZUludChncmFkZS5ncmFkZV92YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgZmluYWxfZ3JhZGUgKz0gZ3JhZGVfaW50CiAgICAgICAgICAgICAgICAgICAgIGdyYWRlc19jb3VudCArPTEKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLmNob29zZWRfY2FsY19vcHRpb24gPT09ICdhdmVyYWdlJykge2ZpbmFsX2dyYWRlID0gTWF0aC5yb3VuZChmaW5hbF9ncmFkZSAvIGdyYWRlc19jb3VudCl9CiAgICAgICAgICBpZiAodGhpcy5jaG9vc2VkX2NhbGNfb3B0aW9uID09PSAnc3VtJykge30KCiAgICAgICAgICByZXR1cm4gaXNOYU4oZmluYWxfZ3JhZGUpID8gMCA6IGZpbmFsX2dyYWRlCiAgICAgICAgfSwKICAgICAgICBjYWxjX2FsbF9maW5hbF9ncmFkZXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgaWYgKHRoaXMuY2hvb3NlZF9jYWxjX29wdGlvbiAhPT0gJycpIHsKICAgICAgICAgICAgZm9yIChsZXQgc3R1ZGVudCBvZiB0aGlzLnN0dWRlbnRzKSB7CiAgICAgICAgICAgICAgc3R1ZGVudC5ncmFkZXNbJ1x1MDVDNNCY0YLQvtCzJ11bMF0uZ3JhZGVfdmFsdWUgPSB0aGlzLmZpbmFsX2dyYWRlX2NhbGMoc3R1ZGVudCkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgc2F2ZV90YWJsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGxldCBhbGxfZ3JhZGVzID0ge30KICAgICAgICAgICAgZm9yIChsZXQgc3R1ZGVudCBvZiB0aGlzLnN0dWRlbnRzKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCB0eXBlIGluIHN0dWRlbnQuZ3JhZGVzKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZ3JhZGUgb2Ygc3R1ZGVudC5ncmFkZXNbdHlwZV0pCiAgICAgICAgICAgICAgICAgICAgYWxsX2dyYWRlc1tncmFkZS5pZF0gPSBncmFkZS5ncmFkZV92YWx1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICBsZXQgZGF0YSA9IHthY3Rpb246ICdzYXZlX3RhYmxlJywgcGFyYW1zOiB7dGFibGVfaWQ6IHRoaXMudGFibGVfaWQsIGFsbF9ncmFkZXM6IGFsbF9ncmFkZXN9fQogICAgICAgICAgYXhpb3Moe3VybDogYGh0dHA6Ly9sb2NhbGhvc3Q6NjA2MC9hcGkvdGFibGVfY3JlYXRvci9gLCBkYXRhOiBkYXRhLCBtZXRob2Q6ICdQT1NUJ30pCiAgICAgICAgICAgIC50aGVuKHJlc3AgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlc3AuZGF0YS5yZXN1bHQgPT09ICdvaycpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1ha2VfdG9hc3QoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1JywgJ9Ci0LDQsdC70LjRhtCwINGB0L7RhdGA0LDQvdC10L3QsCcpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1ha2VfdG9hc3QoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1JywgJ9Ce0YjQuNCx0LrQsCDQv9GA0Lgg0YHQvtGF0YDQsNC90LXQvdC40LgnKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YS5wYXJhbXMubWVzc2FnZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKCiAgICAgICAgfSwKICAgICAgICBjcmVhdGVfZG9jdW1lbnQ6IGZ1bmN0aW9uICh0YWJsZV9pZCkgewogICAgICAgICAgICB0aGlzLnNhdmVfdGFibGUoKQogICAgICAgICAgICBsZXQgZGF0YSA9IHsnYWN0aW9uJzogJ2NyZWF0ZV9kb2N1bWVudCcsICdwYXJhbXMnOiB7J3RhYmxlX2lkJzogdGFibGVfaWR9fQogICAgICAgICAgICBheGlvcyh7dXJsOiAnaHR0cDovL2xvY2FsaG9zdDo2MDYwL2FwaS90YWJsZV9jcmVhdG9yLycsIGRhdGE6IGRhdGEsIG1ldGhvZDogJ1BPU1QnLCByZXNwb25zZVR5cGU6ICdibG9iJ30pCiAgICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3ApCiAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZVVSTCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtyZXNwLmRhdGFdKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZUxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTGluay5ocmVmID0gZmlsZVVSTDsKICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMaW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCAnZmlsZS54bHMnKTsKICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZmlsZUxpbmspOwogICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUxpbmsuY2xpY2soKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiAoY29uc29sZS5sb2coZXJyb3IpKSkKICAgICAgICB9LAogICAgICAgIC8vYWRkaXRpb25hbCBmdW5jdGlvbnMKICAgICAgICBjb21wYXJlX2dyYWRlczogZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgaWYgKGEuZ3JhZGVfdHlwZSA8IGIuZ3JhZGVfdHlwZSkKICAgICAgICAgICAgICAgIHJldHVybiAtMQogICAgICAgICAgICBpZiAoYS5ncmFkZV90eXBlID4gYi5ncmFkZV90eXBlKQogICAgICAgICAgICAgICAgcmV0dXJuIDEKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICB9LAogICAgICAgIG1ha2VfdG9hc3Q6IGZ1bmN0aW9uIChldmVudF90eXBlLCBtZXNzYWdlLCBhcHBlbmQ9ZmFsc2UpIHsKICAgICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChtZXNzYWdlLCB7CiAgICAgICAgICAgICAgICB0aXRsZTogZXZlbnRfdHlwZSwKICAgICAgICAgICAgICAgIGF1dG9IaWRlRGVsYXk6IDUwMDAsCiAgICAgICAgICAgICAgICBhcHBlbmRUb2FzdDogYXBwZW5kCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfSwKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy50YWJsZV9pZCA9IHRoaXMudGFibGVfZGF0YS5pZAogICAgICAgIHRoaXMuc3R1ZGVudHMgPSB0aGlzLnRhYmxlX2RhdGEuc3R1ZGVudHNfYW5kX2dyYWRlcwogICAgICAgIHRoaXMuZ3JhZGVzX3R5cGVzID0gdGhpcy50YWJsZV9kYXRhLmdyYWRlc190eXBlcwogICAgfQp9CgoK"},{"version":3,"sources":["TableGenerator.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TableGenerator.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"table-generator\">\n        <b-card class=\"mt-3\">\n            <b-card-body style=\"text-align: center\">\n                <b-form-group class=\"mb-3\">\n                    <b-form-select style=\"width: 14vw; display: inline\" class=\"mr-3\" v-model=\"choosed_column_type\">\n                        <template v-slot:first>\n                            <b-form-select-option :value=\"''\" disabled>-- Тип Контрольной точки --</b-form-select-option>\n                        </template>\n                        <b-form-select-option v-for=\"type in store.state.col_types\" :key=\"type\" v-bind:value=\"type\">{{type}}</b-form-select-option>\n                    </b-form-select>\n\n                    <b-form-input style=\"width: 12vw; display: inline\" v-model=\"custom_column_type\" v-if=\"choosed_column_type === 'Свой вариант'\" type='text' placeholder='Укажите свой вариант'/>\n\n                    <b-form-select style=\"width: 16vw; display: inline\" class=\"ml-3\" v-model=\"choosed_calc_option\" @change=\"calc_all_final_grades\">\n                        <template v-slot:first>\n                            <b-form-select-option :value=\"''\">-- Расчёт итоговой оценки (откл) --</b-form-select-option>\n                        </template>\n                        <b-form-select-option v-for=\"option in final_grade_calc_options\" :key=\"option.value\" v-bind:value=\"option.value\">{{option.text}}</b-form-select-option>\n                    </b-form-select>\n                </b-form-group>\n                <b-form-group>\n                    <b-button squared variant=\"outline-dark\" @click=\"add_column\" class=\"mr-3\">Добавить столбец</b-button>\n                    <b-button squared variant=\"outline-dark\" @click=\"delete_column\" class=\"mr-3\">Удалить столбец</b-button>\n                    <b-button squared variant=\"outline-dark\" @click=\"save_table\" class=\"mr-3\">Сохранить таблицу</b-button>\n                    <b-button squared variant=\"outline-dark\" @click=\"create_document(table_id)\" class=\"mr-3\">Скачать файл (.xls)</b-button>\n                </b-form-group>\n            </b-card-body>\n        </b-card>\n        <b-card class=\"mt-1\">\n            <b-card-body>\n                <div class=\"table-wrapper\">\n                    <table border=\"2\" style=\"margin: auto\" ref=\"grades_table\">\n                        <thead>\n                            <tr>\n                                <th rowspan=\"2\">\n                                    ФИО\n                                </th>\n                                <th v-for=\"(num, name) in grades_types\" :key=\"name\" :colspan=\"num\" class=\"table-head-cell\">\n                                    {{name}}\n                                </th>\n                            </tr>\n                            <tr>\n                                <template v-for=\"(num, name) in grades_types\">\n                                    <th v-for=\"n in num\" class=\"table-grade-cell\">\n                                        № {{n}}\n                                    </th>\n                                </template>\n                            </tr>\n                        </thead>\n                        <tbody>\n\n                            <tr v-for=\"student in students\">\n                               <td class=\"table-fio-cell\" align=\"left\">\n                                    {{student.fio}}\n                               </td>\n                                <template v-for=\"grade_type in student.grades\">\n                                    <td v-for=\"grade in grade_type\">\n                                        <div v-show=\"current_grade !== grade.id\">\n                                            <span @mouseenter=\"current_grade = grade.id\" class=\"grade-span\">{{grade.grade_value}}</span>\n                                        </div>\n                                        <b-input class=\"grade-input\"\n                                                 v-show=\"current_grade === grade.id\"\n                                                 v-model=\"grade.grade_value\"\n                                                 @change=\"student.grades['\\u05C4Итог'][0].grade_value = final_grade_calc(student)\"\n                                                 @mouseleave=\"current_grade = ''\"\n                                                 @keyup.enter=\"current_grade = ''\"/>\n                                    </td>\n                                </template>\n                            </tr>\n                        </tbody>\n                    </table>\n                </div>\n            </b-card-body>\n\n        </b-card>\n\n    </div>\n</template>\n\n<script>\n    import axios from 'axios'\n    import store from '../store'\n\n    export default {\n        name: \"TableGenerator\",\n        components: {},\n        props: ['table_data'],\n        data() {\n            return {\n                store: store,\n                table_id: '',\n                students: '',\n                grades_types: '',\n                selected_column_type: '',\n                choosed_column_type: '',\n                custom_column_type: '',\n                current_grade: '',\n                final_grade_calc_options: [\n                    {value: 'average', text: 'Средний балл'},\n                    {value: 'sum', text: 'Сумма баллов'},\n                ],\n                choosed_calc_option: '',\n                unfilled_as_zero: false\n            }\n        },\n        methods: {\n            add_column: function () {\n                let _t = this\n\n                if (_t.choosed_column_type === 'Свой вариант') {\n                    if (_t.custom_column_type !== '') {\n                        _t.selected_column_type = _t.custom_column_type\n                    }\n                }\n                else {_t.selected_column_type = _t.choosed_column_type}\n\n                for (let [key, value] of Object.entries(_t.grades_types)) {\n                    if (key === this.selected_column_type) {\n                        _t.grades_types[key] +=1\n                    }\n                }\n                if (_t.grades_types[_t.selected_column_type] === undefined) {\n                    _t.$set(_t.grades_types, _t.selected_column_type, 1)\n\n                    let ordered_types = {}\n                    Object.keys(_t.grades_types).sort().forEach(function(key) {\n                        ordered_types[key] = _t.grades_types[key];\n                    })\n                    _t.grades_types = ordered_types\n                    /*\n                    let students_with_sorted_grades = []\n                    for (let student of this.students) {\n                        let ordered_types_for_student = {}\n                        Object.keys(student.grades).sort().forEach(function(key) {\n                        ordered_types_for_student[key] = student.grades[key];\n                        })\n                        student.grades = ordered_types_for_student\n                        students_with_sorted_grades.push(student)\n                    }\n                    this.students = students_with_sorted_grades\n                    */\n                }\n\n                let data = {action: 'add_column', params: {table_id: _t.table_id, column_type: _t.selected_column_type}}\n                axios({url: `http://localhost:6060/api/table_creator/`, data: data, method: 'POST'})\n                .then(resp => {\n                    if (resp.data.result === 'ok') {\n                        let new_grades = resp.data.params.new_grades\n                        for (let student of _t.students) {\n                            if (!(_t.selected_column_type in student.grades)) {\n                                _t.$set(student.grades, _t.selected_column_type, [])\n                            }\n                            student.grades[_t.selected_column_type].push(new_grades[student.id])\n                            //\n                            let students_with_sorted_grades = []\n                            for (let student of this.students) {\n                                let ordered_types_for_student = {}\n                                Object.keys(student.grades).sort().forEach(function(key) {\n                                ordered_types_for_student[key] = student.grades[key];\n                                })\n                                student.grades = ordered_types_for_student\n                                students_with_sorted_grades.push(student)\n                            }\n                            this.students = students_with_sorted_grades\n                            //\n                        }\n                    }\n                    else {\n                        console.log(resp.data.params.message)\n                    }\n                })\n            },\n            delete_column: function () {\n                var _t = this\n\n                if (_t.choosed_column_type === 'Свой вариант') {\n                    if (_t.custom_column_type !== '') {\n                        _t.selected_column_type = _t.custom_column_type\n                    }\n                }\n                else {_t.selected_column_type = _t.choosed_column_type}\n\n                if (_t.selected_column_type in _t.grades_types) {\n                     let deleted_grades_ids = []\n                     for (let student of _t.students) {\n                         let last_grade_in_type = student.grades[_t.selected_column_type][student.grades[_t.selected_column_type].length - 1]\n                         let last_grade_in_type_id = last_grade_in_type.id\n                         deleted_grades_ids.push(last_grade_in_type_id)\n                     }\n                     let data = {action: 'delete_column', params: {table_id: _t.table_id, grades_ids: deleted_grades_ids}}\n                     axios({url: `http://localhost:6060/api/table_creator/`, data: data, method: 'POST'})\n                    .then(resp => {\n                        if (resp.data.result === 'ok') {\n                            for (let student of _t.students) {\n                                student.grades[_t.selected_column_type].pop()\n                                if (student.grades[_t.selected_column_type] <= 0) delete student.grades[_t.selected_column_type]\n                            }\n                            for (let [key, value] of Object.entries(_t.grades_types)) {\n                                if (key === _t.selected_column_type) {\n                                    _t.grades_types[key] -=1\n                                    if (_t.grades_types[key] <= 0) {\n                                        delete _t.grades_types[key]\n                                    }\n                                }\n                            }\n                        }\n                        else {\n                            console.log(resp.data.params.message)\n                        }\n                    })\n                }\n            },\n            final_grade_calc: function (student) {\n              if (this.choosed_calc_option === '') {return student.grades['\\u05C4Итог'][0].grade_value}\n              let final_grade = 0\n              let grades_count = 0\n              for (let [grade_type, grades_array] of Object.entries(student.grades)) {\n                  for (let grade of grades_array) {\n                      if (grade.grade_value !== null && grade.grade_value !== '' && grade_type !== '\\u05C4Итог') {\n                         let grade_int = Number.parseInt(grade.grade_value)\n                         final_grade += grade_int\n                         grades_count +=1\n                      }\n                  }\n              }\n              if (this.choosed_calc_option === 'average') {final_grade = Math.round(final_grade / grades_count)}\n              if (this.choosed_calc_option === 'sum') {}\n\n              return isNaN(final_grade) ? 0 : final_grade\n            },\n            calc_all_final_grades: function() {\n              if (this.choosed_calc_option !== '') {\n                for (let student of this.students) {\n                  student.grades['\\u05C4Итог'][0].grade_value = this.final_grade_calc(student)\n                }\n              }\n            },\n            save_table: function() {\n                let all_grades = {}\n                for (let student of this.students) {\n                    for (let type in student.grades) {\n                        for (let grade of student.grades[type])\n                        all_grades[grade.id] = grade.grade_value\n                    }\n                }\n              let data = {action: 'save_table', params: {table_id: this.table_id, all_grades: all_grades}}\n              axios({url: `http://localhost:6060/api/table_creator/`, data: data, method: 'POST'})\n                .then(resp => {\n                    if (resp.data.result === 'ok') {\n                        this.make_toast('Сохранение', 'Таблица сохранена')\n                    }\n                    else {\n                        this.make_toast('Сохранение', 'Ошибка при сохранении')\n                        console.log(resp.data.params.message)\n                    }\n                })\n\n            },\n            create_document: function (table_id) {\n                this.save_table()\n                let data = {'action': 'create_document', 'params': {'table_id': table_id}}\n                axios({url: 'http://localhost:6060/api/table_creator/', data: data, method: 'POST', responseType: 'blob'})\n                    .then(resp => {\n                             console.log(resp)\n                             var fileURL = window.URL.createObjectURL(new Blob([resp.data]));\n                             var fileLink = document.createElement('a');\n                             fileLink.href = fileURL;\n                             fileLink.setAttribute('download', 'file.xls');\n                             document.body.appendChild(fileLink);\n                             fileLink.click();\n                    })\n                .catch(error => (console.log(error)))\n            },\n            //additional functions\n            compare_grades: function (a, b) {\n                if (a.grade_type < b.grade_type)\n                    return -1\n                if (a.grade_type > b.grade_type)\n                    return 1\n                return 0\n            },\n            make_toast: function (event_type, message, append=false) {\n                this.$bvToast.toast(message, {\n                    title: event_type,\n                    autoHideDelay: 5000,\n                    appendToast: append\n                })\n            }\n        },\n        created() {\n            this.table_id = this.table_data.id\n            this.students = this.table_data.students_and_grades\n            this.grades_types = this.table_data.grades_types\n        }\n    }\n\n\n</script>\n\n<style scoped>\n    .table-wrapper {\n        margin-top: 30px;\n    }\n    .table-grade-cell {\n        min-width: 50px;\n    }\n    .table-head-cell {\n        padding: 5px;\n    }\n    .table-fio-cell {\n        padding-left: 5px;\n        padding-right: 5px;\n    }\n    table {\n        overflow: hidden;\n    }\n    tr:hover {\n        background-color: #e4fffa;\n    }\n\n    td:hover::after,\n    th:hover::after {\n      content: \"\";\n      position: absolute;\n      left: 0;\n      top: -5000px;\n      height: 100px;\n      width: 100%;\n      z-index: -1;\n    }\n\n    .grade-span {\n        display: block;\n        box-sizing: border-box;\n        width: 100%;\n        height: 25px;\n    }\n\n    .grade-input {\n        position: center;\n        width: 50px;\n        height: 25px;\n    }\n</style>"]}]}